<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a0033">
    <meta name="description" content="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤ –Ω–∞ –†–∞–º–∞–¥–∞–Ω 2026 –≤ –°–∞—Ä–∞—Ç–æ–≤–µ">
    <title>–†–∞–º–∞–¥–∞–Ω 2026 - –°–∞—Ä–∞—Ç–æ–≤</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            --bg-primary: #0a0015;
            --bg-secondary: #1a0033;
            --bg-card: rgba(42, 15, 82, 0.6);
            --accent-purple: #8b5cf6;
            --accent-gold: #fbbf24;
            --accent-teal: #14b8a6;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(20, 184, 166, 0.15) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite alternate;
            z-index: -1;
        }

        @keyframes drift {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(5%, 5%) rotate(5deg); }
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }

        .moon-stars {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .moon-icon, .star-icon {
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .glass-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .countdown-section {
            text-align: center;
            background: var(--gradient-1);
            padding: 30px;
            border-radius: 24px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .countdown-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: 0;
        }

        .countdown-content {
            position: relative;
            z-index: 1;
        }

        .next-prayer-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .next-prayer-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .countdown-timer {
            font-size: 3rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            margin-bottom: 10px;
        }

        .countdown-units {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .today-times {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .prayer-time {
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            border-radius: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .prayer-time:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .prayer-time.highlight {
            background: var(--gradient-2);
            box-shadow: 0 4px 16px rgba(245, 87, 108, 0.4);
        }

        .prayer-name {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .prayer-time.highlight .prayer-name {
            color: white;
            font-weight: 600;
        }

        .prayer-value {
            font-size: 1.4rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }

        .day-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .current-day {
            text-align: center;
        }

        .day-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .day-date {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .month-view-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 16px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .month-view-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .calendar-grid {
            display: none;
            max-height: 60vh;
            overflow-y: auto;
            padding: 10px;
        }

        .calendar-grid.active {
            display: block;
        }

        .calendar-day {
            display: grid;
            grid-template-columns: 80px repeat(6, 1fr);
            gap: 8px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 8px;
            font-size: 0.85rem;
            align-items: center;
        }

        .calendar-day.current {
            background: var(--gradient-3);
            box-shadow: 0 4px 16px rgba(79, 172, 254, 0.3);
        }

        .calendar-day-num {
            font-weight: 700;
            font-size: 1rem;
        }

        .calendar-time {
            text-align: center;
            font-variant-numeric: tabular-nums;
        }

        .footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .method-note {
            margin-top: 10px;
            padding: 12px;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--gradient-1);
            padding: 16px;
            border-radius: 16px;
            display: none;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            z-index: 1000;
        }

        .install-prompt.show {
            display: flex;
        }

        .install-btn {
            background: white;
            color: var(--accent-purple);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .close-install {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            margin-left: auto;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 400px) {
            .calendar-grid {
                font-size: 0.75rem;
            }
            .calendar-day {
                grid-template-columns: 60px repeat(6, 1fr);
                gap: 4px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="moon-stars">
                <svg class="moon-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="var(--accent-gold)"></path>
                </svg>
                <svg class="star-icon" width="24" height="24" viewBox="0 0 24 24" fill="var(--accent-teal)">
                    <path d="M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.7-6.3 4.7 2.3-7-6-4.6h7.6z"></path>
                </svg>
            </div>
            <h1>–†–∞–º–∞–¥–∞–Ω 2026</h1>
            <p class="subtitle">–°–∞—Ä–∞—Ç–æ–≤</p>
        </header>

        <div class="countdown-section">
            <div class="countdown-content">
                <div class="next-prayer-label">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞–º–∞–∑–∞</div>
                <div class="next-prayer-name" id="nextPrayerName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="countdown-timer" id="countdownTimer">--:--:--</div>
                <div class="countdown-units">—á–∞—Å—ã : –º–∏–Ω—É—Ç—ã : —Å–µ–∫—É–Ω–¥—ã</div>
            </div>
        </div>

        <div class="glass-card">
            <div class="day-navigation">
                <button class="nav-btn" id="prevDay" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å">‚Äπ</button>
                <div class="current-day">
                    <div class="day-number" id="currentDayNum">1</div>
                    <div class="day-date" id="currentDate">19 —Ñ–µ–≤—Ä–∞–ª—è</div>
                </div>
                <button class="nav-btn" id="nextDay" aria-label="–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å">‚Ä∫</button>
            </div>

            <div class="today-times" id="todayTimes"></div>
        </div>

        <button class="month-view-btn" id="toggleMonth">üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü</button>

        <div class="glass-card calendar-grid" id="calendarGrid"></div>

        <div class="footer">
            <p>¬© 2026 –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤ - –°–∞—Ä–∞—Ç–æ–≤</p>
            <div class="method-note">
                ‚öôÔ∏è –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞: –§–∞–¥–∂—Ä –ø–æ —É–≥–ª—É 16 –≥—Ä–∞–¥—É—Å–æ–≤
            </div>
        </div>
    </div>

    <div class="install-prompt" id="installPrompt">
        <span>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
        <button class="install-btn" id="installBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button class="close-install" id="closeInstall">√ó</button>
    </div>

    <script>
        const ramadanData = [
            { day: 1, date: '19.02', fajr: '06:24', sunrise: '08:02', dhuhr: '13:15', asr: '16:27', maghrib: '18:18', isha: '20:30' },
            { day: 2, date: '20.02', fajr: '06:22', sunrise: '08:00', dhuhr: '13:15', asr: '16:29', maghrib: '18:20', isha: '20:30' },
            { day: 3, date: '21.02', fajr: '06:20', sunrise: '07:58', dhuhr: '13:15', asr: '16:31', maghrib: '18:22', isha: '20:30' },
            { day: 4, date: '22.02', fajr: '06:18', sunrise: '07:56', dhuhr: '13:15', asr: '16:33', maghrib: '18:24', isha: '20:30' },
            { day: 5, date: '23.02', fajr: '06:16', sunrise: '07:54', dhuhr: '13:15', asr: '16:35', maghrib: '18:26', isha: '20:30' },
            { day: 6, date: '24.02', fajr: '06:14', sunrise: '07:52', dhuhr: '13:15', asr: '16:37', maghrib: '18:28', isha: '20:30' },
            { day: 7, date: '25.02', fajr: '06:12', sunrise: '07:50', dhuhr: '13:15', asr: '16:38', maghrib: '18:30', isha: '20:30' },
            { day: 8, date: '26.02', fajr: '06:10', sunrise: '07:48', dhuhr: '13:15', asr: '16:40', maghrib: '18:32', isha: '20:30' },
            { day: 9, date: '27.02', fajr: '06:08', sunrise: '07:46', dhuhr: '13:15', asr: '16:41', maghrib: '18:33', isha: '20:30' },
            { day: 10, date: '28.02', fajr: '06:06', sunrise: '07:44', dhuhr: '13:15', asr: '16:42', maghrib: '18:34', isha: '20:30' },
            { day: 11, date: '01.03', fajr: '06:04', sunrise: '07:42', dhuhr: '13:15', asr: '16:43', maghrib: '18:36', isha: '20:45' },
            { day: 12, date: '02.03', fajr: '06:02', sunrise: '07:40', dhuhr: '13:15', asr: '16:45', maghrib: '18:38', isha: '20:45' },
            { day: 13, date: '03.03', fajr: '06:00', sunrise: '07:38', dhuhr: '13:15', asr: '16:47', maghrib: '18:40', isha: '20:45' },
            { day: 14, date: '04.03', fajr: '05:58', sunrise: '07:36', dhuhr: '13:15', asr: '16:49', maghrib: '18:42', isha: '20:45' },
            { day: 15, date: '05.03', fajr: '05:56', sunrise: '07:34', dhuhr: '13:15', asr: '16:50', maghrib: '18:44', isha: '20:45' },
            { day: 16, date: '06.03', fajr: '05:54', sunrise: '07:32', dhuhr: '13:15', asr: '16:52', maghrib: '18:46', isha: '20:45' },
            { day: 17, date: '07.03', fajr: '05:52', sunrise: '07:30', dhuhr: '13:15', asr: '16:53', maghrib: '18:48', isha: '21:00' },
            { day: 18, date: '08.03', fajr: '05:50', sunrise: '07:28', dhuhr: '13:15', asr: '16:54', maghrib: '18:50', isha: '21:00' },
            { day: 19, date: '09.03', fajr: '05:48', sunrise: '07:26', dhuhr: '13:15', asr: '16:55', maghrib: '18:51', isha: '21:00' },
            { day: 20, date: '10.03', fajr: '05:46', sunrise: '07:24', dhuhr: '13:15', asr: '16:56', maghrib: '18:52', isha: '21:00' },
            { day: 21, date: '11.03', fajr: '05:41', sunrise: '07:20', dhuhr: '13:15', asr: '16:58', maghrib: '18:53', isha: '21:00' },
            { day: 22, date: '12.03', fajr: '05:39', sunrise: '07:18', dhuhr: '13:15', asr: '17:00', maghrib: '18:55', isha: '21:00' },
            { day: 23, date: '13.03', fajr: '05:37', sunrise: '07:16', dhuhr: '13:15', asr: '17:02', maghrib: '18:57', isha: '21:00' },
            { day: 24, date: '14.03', fajr: '05:35', sunrise: '07:14', dhuhr: '13:15', asr: '17:03', maghrib: '18:59', isha: '21:00' },
            { day: 25, date: '15.03', fajr: '05:33', sunrise: '07:12', dhuhr: '13:15', asr: '17:05', maghrib: '19:01', isha: '21:00' },
            { day: 26, date: '16.03', fajr: '05:31', sunrise: '07:10', dhuhr: '13:15', asr: '17:06', maghrib: '19:03', isha: '21:00' },
            { day: 27, date: '17.03', fajr: '05:29', sunrise: '07:08', dhuhr: '13:15', asr: '17:07', maghrib: '19:05', isha: '21:00' },
            { day: 28, date: '18.03', fajr: '05:25', sunrise: '07:04', dhuhr: '13:15', asr: '17:08', maghrib: '19:06', isha: '21:00' },
            { day: 29, date: '19.03', fajr: '05:22', sunrise: '07:01', dhuhr: '13:15', asr: '17:09', maghrib: '19:07', isha: '21:00' }
        ];

        const prayerNames = {
            fajr: '–§–∞–¥–∂—Ä (–†–∞—Å—Å–≤–µ—Ç)',
            sunrise: '–í–æ—Å—Ö–æ–¥',
            dhuhr: '–ó—É—Ö—Ä (–ü–æ–ª–¥–µ–Ω—å)',
            asr: '–ê—Å—Ä (–ü–æ—Å–ª–µ –ø–æ–ª—É–¥–Ω—è)',
            maghrib: '–ú–∞–≥—Ä–∏–± (–ó–∞–∫–∞—Ç)',
            isha: '–ò—à–∞ (–ù–æ—á—å)'
        };

        const monthNames = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];

        let currentDayIndex = 0;
        let countdownInterval;
        let deferredPrompt;

        function getCurrentRamadanDay() {
            const now = new Date();
            const startDate = new Date(2026, 1, 19);
            const endDate = new Date(2026, 2, 19);
            
            if (now < startDate) return 0;
            if (now > endDate) return ramadanData.length - 1;
            
            const diffTime = now - startDate;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            return Math.min(diffDays, ramadanData.length - 1);
        }

        function formatDate(dateStr) {
            const [day, month] = dateStr.split('.');
            const monthIndex = month === '02' ? 1 : 2;
            return `${parseInt(day)} ${monthNames[monthIndex]}`;
        }

        function displayDay(index) {
            currentDayIndex = index;
            const dayData = ramadanData[index];
            
            document.getElementById('currentDayNum').textContent = `–î–µ–Ω—å ${dayData.day}`;
            document.getElementById('currentDate').textContent = formatDate(dayData.date);
            
            const todayTimesEl = document.getElementById('todayTimes');
            todayTimesEl.innerHTML = '';
            
            const prayers = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];
            const highlight = ['fajr', 'maghrib'];
            
            prayers.forEach(prayer => {
                const prayerEl = document.createElement('div');
                prayerEl.className = `prayer-time ${highlight.includes(prayer) ? 'highlight' : ''}`;
                prayerEl.innerHTML = `
                    <div class="prayer-name">${prayerNames[prayer]}</div>
                    <div class="prayer-value">${dayData[prayer]}</div>
                `;
                todayTimesEl.appendChild(prayerEl);
            });
            
            document.getElementById('prevDay').disabled = index === 0;
            document.getElementById('nextDay').disabled = index === ramadanData.length - 1;
            
            updateCountdown();
        }

        function getNextPrayer() {
            const now = new Date();
            const dayData = ramadanData[currentDayIndex];
            const [day, month] = dayData.date.split('.');
            const year = month === '02' ? 2026 : 2026;
            const monthIndex = month === '02' ? 1 : 2;
            
            const prayers = [
                { name: '–§–∞–¥–∂—Ä', key: 'fajr', time: dayData.fajr },
                { name: '–í–æ—Å—Ö–æ–¥', key: 'sunrise', time: dayData.sunrise },
                { name: '–ó—É—Ö—Ä', key: 'dhuhr', time: dayData.dhuhr },
                { name: '–ê—Å—Ä', key: 'asr', time: dayData.asr },
                { name: '–ú–∞–≥—Ä–∏–±', key: 'maghrib', time: dayData.maghrib },
                { name: '–ò—à–∞', key: 'isha', time: dayData.isha }
            ];
            
            for (let prayer of prayers) {
                const [hours, minutes] = prayer.time.split(':');
                const prayerTime = new Date(year, monthIndex, parseInt(day), parseInt(hours), parseInt(minutes));
                
                if (now < prayerTime) {
                    return { name: prayer.name, time: prayerTime };
                }
            }
            
            if (currentDayIndex < ramadanData.length - 1) {
                const nextDay = ramadanData[currentDayIndex + 1];
                const [nextDayNum, nextMonth] = nextDay.date.split('.');
                const nextMonthIndex = nextMonth === '02' ? 1 : 2;
                const [hours, minutes] = nextDay.fajr.split(':');
                return {
                    name: '–§–∞–¥–∂—Ä',
                    time: new Date(year, nextMonthIndex, parseInt(nextDayNum), parseInt(hours), parseInt(minutes))
                };
            }
            
            return null;
        }

        function updateCountdown() {
            const nextPrayer = getNextPrayer();
            
            if (!nextPrayer) {
                document.getElementById('nextPrayerName').textContent = '–†–∞–º–∞–¥–∞–Ω –∑–∞–≤–µ—Ä—à—ë–Ω';
                document.getElementById('countdownTimer').textContent = '--:--:--';
                return;
            }
            
            document.getElementById('nextPrayerName').textContent = nextPrayer.name;
            
            function tick() {
                const now = new Date();
                const diff = nextPrayer.time - now;
                
                if (diff <= 0) {
                    updateCountdown();
                    return;
                }
                
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('countdownTimer').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
            
            tick();
            clearInterval(countdownInterval);
            countdownInterval = setInterval(tick, 1000);
        }

        function renderCalendar() {
            const calendarEl = document.getElementById('calendarGrid');
            calendarEl.innerHTML = '';
            
            ramadanData.forEach((day, index) => {
                const dayEl = document.createElement('div');
                dayEl.className = `calendar-day ${index === currentDayIndex ? 'current' : ''}`;
                dayEl.innerHTML = `
                    <div class="calendar-day-num">${day.day}</div>
                    <div class="calendar-time">${day.fajr}</div>
                    <div class="calendar-time">${day.sunrise}</div>
                    <div class="calendar-time">${day.dhuhr}</div>
                    <div class="calendar-time">${day.asr}</div>
                    <div class="calendar-time">${day.maghrib}</div>
                    <div class="calendar-time">${day.isha}</div>
                `;
                dayEl.addEventListener('click', () => {
                    displayDay(index);
                    document.getElementById('calendarGrid').classList.remove('active');
                    document.getElementById('toggleMonth').textContent = 'üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü';
                });
                calendarEl.appendChild(dayEl);
            });
        }

        document.getElementById('prevDay').addEventListener('click', () => {
            if (currentDayIndex > 0) displayDay(currentDayIndex - 1);
        });

        document.getElementById('nextDay').addEventListener('click', () => {
            if (currentDayIndex < ramadanData.length - 1) displayDay(currentDayIndex + 1);
        });

        document.getElementById('toggleMonth').addEventListener('click', () => {
            const calendarEl = document.getElementById('calendarGrid');
            const btn = document.getElementById('toggleMonth');
            calendarEl.classList.toggle('active');
            btn.textContent = calendarEl.classList.contains('active') ? 'üîº –°–∫—Ä—ã—Ç—å –º–µ—Å—è—Ü' : 'üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü';
        });

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.add('show');
        });

        document.getElementById('installBtn').addEventListener('click', async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            deferredPrompt = null;
            document.getElementById('installPrompt').classList.remove('show');
        });

        document.getElementById('closeInstall').addEventListener('click', () => {
            document.getElementById('installPrompt').classList.remove('show');
        });

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }

        const initialDay = getCurrentRamadanDay();
        displayDay(initialDay);
        renderCalendar();

        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            if (touchEndX < touchStartX - 50 && currentDayIndex < ramadanData.length - 1) {
                displayDay(currentDayIndex + 1);
            }
            if (touchEndX > touchStartX + 50 && currentDayIndex > 0) {
                displayDay(currentDayIndex - 1);
            }
        }
    </script>
</body>
</html>


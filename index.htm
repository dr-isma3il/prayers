<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a0033">
    <meta name="description" content="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤ –Ω–∞ –†–∞–º–∞–¥–∞–Ω 2026 –≤ –°–∞—Ä–∞—Ç–æ–≤–µ">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–†–∞–º–∞–¥–∞–Ω 2026">
    <title>–†–∞–º–∞–¥–∞–Ω 2026 - –°–∞—Ä–∞—Ç–æ–≤</title>
    <link rel="icon" id="favicon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%238b5cf6'/%3E%3Cstop offset='100%25' style='stop-color:%2314b8a6'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23g)'/%3E%3Cpath d='M65 30A20 20 0 1 1 45 10 15 15 0 0 0 65 30z' fill='%23fbbf24'/%3E%3Cpath d='M75 25l3 9h9l-7 5 3 9-8-6-8 6 3-9-7-5h9z' fill='%2314b8a6'/%3E%3C/svg%3E">
    <style>
        :root {
            --bg-primary: #0a0015;
            --bg-secondary: #1a0033;
            --bg-card: rgba(42, 15, 82, 0.6);
            --accent-purple: #8b5cf6;
            --accent-gold: #fbbf24;
            --accent-teal: #14b8a6;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --fajr-glow: rgba(56, 189, 248, 0.4);
            --maghrib-glow: rgba(251, 146, 60, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(20, 184, 166, 0.15) 0%, transparent 50%);
            animation: drift 20s ease-in-out infinite alternate;
            z-index: -1;
        }

        @keyframes drift {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(5%, 5%) rotate(5deg); }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 900px;
            }
            .main-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
            .countdown-section {
                grid-column: 1 / -1;
            }
        }

        header {
            text-align: center;
            padding: 30px 0;
            position: relative;
        }

        .moon-stars {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .moon-icon, .star-icon {
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .glass-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .countdown-section {
            text-align: center;
            background: var(--gradient-1);
            padding: 30px;
            border-radius: 24px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .countdown-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: 0;
        }

        .countdown-content {
            position: relative;
            z-index: 1;
        }

        .next-prayer-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .next-prayer-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .countdown-timer {
            font-size: 3rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            margin-bottom: 10px;
        }

        .countdown-units {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .today-times {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .prayer-time {
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            border-radius: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .prayer-time:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .prayer-time.fajr-highlight {
            background: rgba(56, 189, 248, 0.15);
            border: 2px solid #38bdf8;
            box-shadow: 0 0 20px var(--fajr-glow), 0 4px 16px rgba(56, 189, 248, 0.3);
            animation: pulse-fajr 2s ease-in-out infinite;
        }

        .prayer-time.maghrib-highlight {
            background: rgba(251, 146, 60, 0.15);
            border: 2px solid #fb923c;
            box-shadow: 0 0 20px var(--maghrib-glow), 0 4px 16px rgba(251, 146, 60, 0.3);
            animation: pulse-maghrib 2s ease-in-out infinite;
        }

        @keyframes pulse-fajr {
            0%, 100% { box-shadow: 0 0 20px var(--fajr-glow), 0 4px 16px rgba(56, 189, 248, 0.3); }
            50% { box-shadow: 0 0 30px var(--fajr-glow), 0 6px 24px rgba(56, 189, 248, 0.5); }
        }

        @keyframes pulse-maghrib {
            0%, 100% { box-shadow: 0 0 20px var(--maghrib-glow), 0 4px 16px rgba(251, 146, 60, 0.3); }
            50% { box-shadow: 0 0 30px var(--maghrib-glow), 0 6px 24px rgba(251, 146, 60, 0.5); }
        }

        .prayer-time.fajr-highlight .prayer-name,
        .prayer-time.maghrib-highlight .prayer-name {
            color: white;
            font-weight: 600;
        }

        .prayer-time.fajr-highlight .prayer-value {
            color: #38bdf8;
        }

        .prayer-time.maghrib-highlight .prayer-value {
            color: #fb923c;
        }

        .prayer-name {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .lang-theme-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 12px 16px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .lang-switch, .theme-switch {
            display: flex;
            gap: 8px;
        }

        .lang-btn, .theme-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-secondary);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .lang-btn.active, .theme-btn.active {
            background: var(--accent-purple);
            color: white;
        }

        .progress-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar-container {
            position: relative;
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #38bdf8 0%, #fb923c 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-percentage {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #38bdf8 0%, #fb923c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .progress-days {
            font-size: 0.85rem;
            color: var(--accent-gold);
        }

        body.light-theme {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-card: rgba(255, 255, 255, 0.8);
            --text-primary: #0f172a;
            --text-secondary: #475569;
        }

        body.light-theme::before {
            background: radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(20, 184, 166, 0.08) 0%, transparent 50%);
        }

        .notifications-permission {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin: 16px 0;
            display: none;
            align-items: center;
            gap: 12px;
        }

        .notifications-permission.show {
            display: flex;
        }

        .notif-text {
            flex: 1;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .notif-btn {
            background: var(--accent-gold);
            color: var(--bg-primary);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .tips-section {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px;
            margin: 16px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tips-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 12px;
            cursor: pointer;
        }

        .tips-header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .collapse-icon {
            transition: transform 0.3s ease;
        }

        .tips-section.collapsed .collapse-icon {
            transform: rotate(-90deg);
        }

        .tips-section.collapsed .tip-content,
        .tips-section.collapsed .dhikr-box {
            display: none;
        }

        .tips-icon {
            font-size: 1.8rem;
        }

        .tips-title {
            font-size: 1.2rem;
            font-weight: 600;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tip-content {
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid var(--accent-teal);
            margin-bottom: 12px;
        }

        .tip-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .dhikr-box {
            background: rgba(139, 92, 246, 0.1);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            margin-top: 12px;
            text-align: center;
        }

        .dhikr-arabic {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 8px;
            direction: rtl;
        }

        .dhikr-translation {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .fasting-duration {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: rgba(20, 184, 166, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(20, 184, 166, 0.3);
            margin: 16px 0;
        }

        .fasting-icon {
            font-size: 1.5rem;
        }

        .fasting-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .fasting-time {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--accent-teal);
        }

        .share-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 14px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }

        .hijri-date {
            text-align: center;
            padding: 12px;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            margin: 16px 0;
        }

        .hijri-text {
            font-size: 1rem;
            color: var(--accent-gold);
            font-weight: 600;
        }

        .imsak-time {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(56, 189, 248, 0.3);
            margin-bottom: 16px;
        }

        .imsak-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .imsak-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #38bdf8;
        }

        .prayer-value {
            font-size: 1.4rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }

        .day-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .current-day {
            text-align: center;
        }

        .day-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .day-date {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .month-view-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 16px;
            border-radius: 16px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .month-view-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .calendar-grid {
            display: none;
            max-height: 60vh;
            overflow-y: auto;
            padding: 10px;
        }

        .calendar-grid.active {
            display: block;
        }

        .calendar-day {
            display: grid;
            grid-template-columns: 80px repeat(6, 1fr);
            gap: 8px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 8px;
            font-size: 0.85rem;
            align-items: center;
        }

        .calendar-day.current {
            background: var(--gradient-3);
            box-shadow: 0 4px 16px rgba(79, 172, 254, 0.3);
        }

        .calendar-day-num {
            font-weight: 700;
            font-size: 1rem;
        }

        .calendar-time {
            text-align: center;
            font-variant-numeric: tabular-nums;
        }

        .footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .method-note {
            margin-top: 10px;
            padding: 12px;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--gradient-1);
            padding: 16px;
            border-radius: 16px;
            display: none;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            z-index: 1000;
        }

        .install-prompt.show {
            display: flex;
        }

        .install-btn {
            background: white;
            color: var(--accent-purple);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .close-install {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            margin-left: auto;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 400px) {
            .calendar-grid {
                font-size: 0.75rem;
            }
            .calendar-day {
                grid-template-columns: 60px repeat(6, 1fr);
                gap: 4px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="moon-stars">
                <svg class="moon-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="var(--accent-gold)"></path>
                </svg>
                <svg class="star-icon" width="24" height="24" viewBox="0 0 24 24" fill="var(--accent-teal)">
                    <path d="M12 2l2.4 7.4h7.6l-6 4.6 2.3 7-6.3-4.7-6.3 4.7 2.3-7-6-4.6h7.6z"></path>
                </svg>
            </div>
            <h1 id="mainTitle">–†–∞–º–∞–¥–∞–Ω 2026</h1>
            <p class="subtitle" id="cityName">–°–∞—Ä–∞—Ç–æ–≤</p>
        </header>

        <div class="lang-theme-bar">
            <div class="lang-switch">
                <button class="lang-btn active" data-lang="ru" id="langRu">RU</button>
                <button class="lang-btn" data-lang="ar" id="langAr">AR</button>
            </div>
            <div class="theme-switch">
                <button class="theme-btn active" data-theme="dark" id="themeDark">üåô</button>
                <button class="theme-btn" data-theme="light" id="themeLight">‚òÄÔ∏è</button>
            </div>
        </div>

        <div class="notifications-permission" id="notifPrompt">
            <span class="notif-text" id="notifText">–†–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 30 –º–∏–Ω –¥–æ –§–∞–¥–∂—Ä–∞?</span>
            <button class="notif-btn" id="enableNotif">–†–∞–∑—Ä–µ—à–∏—Ç—å</button>
        </div>

        <div class="progress-section">
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="progress-info-row">
                <div>
                    <span class="progress-percentage" id="progressPercentage">0%</span>
                    <span class="progress-text" id="progressInfo"> - ÿßŸÑŸäŸàŸÖ 1 ŸÖŸÜ 29</span>
                </div>
                <div class="progress-days" id="daysRemaining">ŸÖÿ™ÿ®ŸÇŸä 28 ŸäŸàŸÖŸãÿß</div>
            </div>
        </div>

        <div class="countdown-section">
            <div class="countdown-content">
                <div class="next-prayer-label">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞–º–∞–∑–∞</div>
                <div class="next-prayer-name" id="nextPrayerName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="countdown-timer" id="countdownTimer">--:--:--</div>
                <div class="countdown-units">—á–∞—Å—ã : –º–∏–Ω—É—Ç—ã : —Å–µ–∫—É–Ω–¥—ã</div>
            </div>
        </div>

        <div class="glass-card">
            <div class="day-navigation">
                <button class="nav-btn" id="prevDay" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å">‚Äπ</button>
                <div class="current-day">
                    <div class="day-number" id="currentDayNum">1</div>
                    <div class="day-date" id="currentDate">19 —Ñ–µ–≤—Ä–∞–ª—è</div>
                </div>
                <button class="nav-btn" id="nextDay" aria-label="–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å">‚Ä∫</button>
            </div>

            <div class="hijri-date">
                <div class="hijri-text" id="hijriDate">1 ÿ±ŸÖÿ∂ÿßŸÜ 1447</div>
            </div>

            <div class="imsak-time">
                <span class="imsak-label">‚è∞ ŸàŸÇÿ™ ÿßŸÑÿ•ŸÖÿ≥ÿßŸÉ</span>
                <span class="imsak-value" id="imsakTime">--:--</span>
            </div>

            <div class="today-times" id="todayTimes"></div>

            <div class="fasting-duration">
                <span class="fasting-icon">‚è±Ô∏è</span>
                <span class="fasting-text">ŸÖÿØÿ© ÿßŸÑÿµŸäÿßŸÖ:</span>
                <span class="fasting-time" id="fastingDuration">--:--</span>
            </div>
        </div>
        </div>

        <div class="tips-section">
            <div class="tips-header" id="tipsToggle">
                <div class="tips-header-left">
                    <span class="tips-icon">üí°</span>
                    <h3 class="tips-title" id="tipsSectionTitle">ŸÜÿµŸäÿ≠ÿ© ÿßŸÑŸäŸàŸÖ</h3>
                </div>
                <span class="collapse-icon">‚ñº</span>
            </div>
            <div class="tip-content">
                <p class="tip-text" id="dailyTip">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</p>
            </div>
            <div class="dhikr-box">
                <div class="dhikr-arabic" id="dhikrArabic">ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéÿ®Ÿêÿ≠ŸéŸÖŸíÿØŸêŸáŸê</div>
                <div class="dhikr-translation" id="dhikrTranslation">–°–≤—è—Ç –ê–ª–ª–∞—Ö –∏ —Ö–≤–∞–ª–∞ –ï–º—É</div>
            </div>
        </div>

        <button class="month-view-btn" id="toggleMonth">üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü</button>

        <div class="glass-card calendar-grid" id="calendarGrid"></div>

        <div class="footer">
            <p>¬© 2026 –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤ - –°–∞—Ä–∞—Ç–æ–≤</p>
            <div class="method-note">
                ‚öôÔ∏è –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞: –§–∞–¥–∂—Ä –ø–æ —É–≥–ª—É 16 –≥—Ä–∞–¥—É—Å–æ–≤
            </div>
        </div>
    </div>

    <div class="install-prompt" id="installPrompt">
        <span>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</span>
        <button class="install-btn" id="installBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button class="close-install" id="closeInstall">√ó</button>
    </div>

    <script>
        const ramadanData = [
            { day: 1, date: '19.02', fajr: '06:24', sunrise: '08:02', dhuhr: '13:15', asr: '16:27', maghrib: '18:18', isha: '20:30' },
            { day: 2, date: '20.02', fajr: '06:22', sunrise: '08:00', dhuhr: '13:15', asr: '16:29', maghrib: '18:20', isha: '20:30' },
            { day: 3, date: '21.02', fajr: '06:20', sunrise: '07:58', dhuhr: '13:15', asr: '16:31', maghrib: '18:22', isha: '20:30' },
            { day: 4, date: '22.02', fajr: '06:18', sunrise: '07:56', dhuhr: '13:15', asr: '16:33', maghrib: '18:24', isha: '20:30' },
            { day: 5, date: '23.02', fajr: '06:16', sunrise: '07:54', dhuhr: '13:15', asr: '16:35', maghrib: '18:26', isha: '20:30' },
            { day: 6, date: '24.02', fajr: '06:14', sunrise: '07:52', dhuhr: '13:15', asr: '16:37', maghrib: '18:28', isha: '20:30' },
            { day: 7, date: '25.02', fajr: '06:12', sunrise: '07:50', dhuhr: '13:15', asr: '16:38', maghrib: '18:30', isha: '20:30' },
            { day: 8, date: '26.02', fajr: '06:10', sunrise: '07:48', dhuhr: '13:15', asr: '16:40', maghrib: '18:32', isha: '20:30' },
            { day: 9, date: '27.02', fajr: '06:08', sunrise: '07:46', dhuhr: '13:15', asr: '16:41', maghrib: '18:33', isha: '20:30' },
            { day: 10, date: '28.02', fajr: '06:06', sunrise: '07:44', dhuhr: '13:15', asr: '16:42', maghrib: '18:34', isha: '20:30' },
            { day: 11, date: '01.03', fajr: '06:04', sunrise: '07:42', dhuhr: '13:15', asr: '16:43', maghrib: '18:36', isha: '20:45' },
            { day: 12, date: '02.03', fajr: '06:02', sunrise: '07:40', dhuhr: '13:15', asr: '16:45', maghrib: '18:38', isha: '20:45' },
            { day: 13, date: '03.03', fajr: '06:00', sunrise: '07:38', dhuhr: '13:15', asr: '16:47', maghrib: '18:40', isha: '20:45' },
            { day: 14, date: '04.03', fajr: '05:58', sunrise: '07:36', dhuhr: '13:15', asr: '16:49', maghrib: '18:42', isha: '20:45' },
            { day: 15, date: '05.03', fajr: '05:56', sunrise: '07:34', dhuhr: '13:15', asr: '16:50', maghrib: '18:44', isha: '20:45' },
            { day: 16, date: '06.03', fajr: '05:54', sunrise: '07:32', dhuhr: '13:15', asr: '16:52', maghrib: '18:46', isha: '20:45' },
            { day: 17, date: '07.03', fajr: '05:52', sunrise: '07:30', dhuhr: '13:15', asr: '16:53', maghrib: '18:48', isha: '21:00' },
            { day: 18, date: '08.03', fajr: '05:50', sunrise: '07:28', dhuhr: '13:15', asr: '16:54', maghrib: '18:50', isha: '21:00' },
            { day: 19, date: '09.03', fajr: '05:48', sunrise: '07:26', dhuhr: '13:15', asr: '16:55', maghrib: '18:51', isha: '21:00' },
            { day: 20, date: '10.03', fajr: '05:46', sunrise: '07:24', dhuhr: '13:15', asr: '16:56', maghrib: '18:52', isha: '21:00' },
            { day: 21, date: '11.03', fajr: '05:41', sunrise: '07:20', dhuhr: '13:15', asr: '16:58', maghrib: '18:53', isha: '21:00' },
            { day: 22, date: '12.03', fajr: '05:39', sunrise: '07:18', dhuhr: '13:15', asr: '17:00', maghrib: '18:55', isha: '21:00' },
            { day: 23, date: '13.03', fajr: '05:37', sunrise: '07:16', dhuhr: '13:15', asr: '17:02', maghrib: '18:57', isha: '21:00' },
            { day: 24, date: '14.03', fajr: '05:35', sunrise: '07:14', dhuhr: '13:15', asr: '17:03', maghrib: '18:59', isha: '21:00' },
            { day: 25, date: '15.03', fajr: '05:33', sunrise: '07:12', dhuhr: '13:15', asr: '17:05', maghrib: '19:01', isha: '21:00' },
            { day: 26, date: '16.03', fajr: '05:31', sunrise: '07:10', dhuhr: '13:15', asr: '17:06', maghrib: '19:03', isha: '21:00' },
            { day: 27, date: '17.03', fajr: '05:29', sunrise: '07:08', dhuhr: '13:15', asr: '17:07', maghrib: '19:05', isha: '21:00' },
            { day: 28, date: '18.03', fajr: '05:25', sunrise: '07:04', dhuhr: '13:15', asr: '17:08', maghrib: '19:06', isha: '21:00' },
            { day: 29, date: '19.03', fajr: '05:22', sunrise: '07:01', dhuhr: '13:15', asr: '17:09', maghrib: '19:07', isha: '21:00' }
        ];

        const translations = {
            ru: {
                title: '–†–∞–º–∞–¥–∞–Ω 2026',
                city: '–°–∞—Ä–∞—Ç–æ–≤',
                nextPrayer: '–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –Ω–∞–º–∞–∑–∞',
                units: '—á–∞—Å—ã : –º–∏–Ω—É—Ç—ã : —Å–µ–∫—É–Ω–¥—ã',
                day: '–î–µ–Ω—å',
                prevDay: '–ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å',
                nextDay: '–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å',
                imsak: '‚è∞ ŸàŸÇÿ™ ÿßŸÑÿ•ŸÖÿ≥ÿßŸÉ',
                fastingDuration: 'ŸÖÿØÿ© ÿßŸÑÿµŸäÿßŸÖ:',
                tipsTitle: 'ŸÜÿµŸäÿ≠ÿ© ÿßŸÑŸäŸàŸÖ',
                showMonth: 'üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü',
                hideMonth: 'üîº –°–∫—Ä—ã—Ç—å –º–µ—Å—è—Ü',
                completed: 'ŸÖŸÉÿ™ŸÖŸÑ',
                remaining: 'ŸÖÿ™ÿ®ŸÇŸä',
                lastDay: 'ÿ¢ÿÆÿ± ŸäŸàŸÖ ŸÖŸÜ ÿ±ŸÖÿ∂ÿßŸÜ',
                ramadanFinished: '–†–∞–º–∞–¥–∞–Ω –∑–∞–≤–µ—Ä—à—ë–Ω',
                notifText: '–†–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 30 –º–∏–Ω –¥–æ –§–∞–¥–∂—Ä–∞?',
                notifButton: '–†–∞–∑—Ä–µ—à–∏—Ç—å',
                prayers: {
                    fajr: '–§–∞–¥–∂—Ä (–†–∞—Å—Å–≤–µ—Ç)',
                    sunrise: '–í–æ—Å—Ö–æ–¥',
                    dhuhr: '–ó—É—Ö—Ä (–ü–æ–ª–¥–µ–Ω—å)',
                    asr: '–ê—Å—Ä (–ü–æ—Å–ª–µ –ø–æ–ª—É–¥–Ω—è)',
                    maghrib: '–ú–∞–≥—Ä–∏–± (–ó–∞–∫–∞—Ç)',
                    isha: '–ò—à–∞ (–ù–æ—á—å)'
                }
            },
            ar: {
                title: 'ÿ±ŸÖÿ∂ÿßŸÜ 2026',
                city: 'ÿ≥ÿßÿ±ÿßÿ™ŸàŸÅ',
                nextPrayer: 'ÿ≠ÿ™Ÿâ ÿßŸÑÿµŸÑÿßÿ© ÿßŸÑŸÇÿßÿØŸÖÿ©',
                units: 'ÿ≥ÿßÿπÿßÿ™ : ÿØŸÇÿßÿ¶ŸÇ : ÿ´ŸàÿßŸÜŸä',
                day: 'ŸäŸàŸÖ',
                prevDay: 'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇ',
                nextDay: 'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßŸÑŸä',
                imsak: '‚è∞ ŸàŸÇÿ™ ÿßŸÑÿ•ŸÖÿ≥ÿßŸÉ',
                fastingDuration: 'ŸÖÿØÿ© ÿßŸÑÿµŸäÿßŸÖ:',
                tipsTitle: 'ŸÜÿµŸäÿ≠ÿ© ÿßŸÑŸäŸàŸÖ',
                showMonth: 'üìÖ ÿπÿ±ÿ∂ ÿßŸÑÿ¥Ÿáÿ± ŸÉÿßŸÖŸÑÿßŸã',
                hideMonth: 'üîº ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ¥Ÿáÿ±',
                completed: 'ŸÖŸÉÿ™ŸÖŸÑ',
                remaining: 'ŸÖÿ™ÿ®ŸÇŸä',
                lastDay: 'ÿ¢ÿÆÿ± ŸäŸàŸÖ ŸÖŸÜ ÿ±ŸÖÿ∂ÿßŸÜ',
                ramadanFinished: 'ÿßŸÜÿ™ŸáŸâ ÿ±ŸÖÿ∂ÿßŸÜ',
                notifText: 'ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÇÿ®ŸÑ 30 ÿØŸÇŸäŸÇÿ© ŸÖŸÜ ÿßŸÑŸÅÿ¨ÿ±ÿü',
                notifButton: 'ÿßŸÑÿ≥ŸÖÿßÿ≠',
                prayers: {
                    fajr: 'ÿßŸÑŸÅÿ¨ÿ±',
                    sunrise: 'ÿßŸÑÿ¥ÿ±ŸàŸÇ',
                    dhuhr: 'ÿßŸÑÿ∏Ÿáÿ±',
                    asr: 'ÿßŸÑÿπÿµÿ±',
                    maghrib: 'ÿßŸÑŸÖÿ∫ÿ±ÿ®',
                    isha: 'ÿßŸÑÿπÿ¥ÿßÿ°'
                }
            }
        };

        let currentLang = localStorage.getItem('ramadan-lang') || 'ru';
        let currentTheme = localStorage.getItem('ramadan-theme') || 'dark';
        const prayerNames = translations[currentLang].prayers;

        const dailyTips = [
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ£ŸàŸÑ: ÿßÿ≥ÿ™ŸÇÿ®ŸÑ ÿ±ŸÖÿ∂ÿßŸÜ ÿ®ŸÜŸäÿ© ÿµÿßÿØŸÇÿ© ŸàŸÇŸÑÿ® ŸÖÿÆŸÑÿµ. ÿ±ŸÖÿ∂ÿßŸÜ ŸÉÿ±ŸäŸÖ!',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÜŸä: ÿßÿ≠ÿ±ÿµ ÿπŸÑŸâ ŸÇÿ±ÿßÿ°ÿ© ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸäŸàŸÖŸäŸãÿßÿå ŸàŸÑŸà ÿ¨ÿ≤ÿ°Ÿãÿß Ÿàÿßÿ≠ÿØŸãÿß.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÑÿ´: ÿßŸÑÿØÿπÿßÿ° ÿπŸÜÿØ ÿßŸÑÿ•ŸÅÿ∑ÿßÿ± ŸÖÿ≥ÿ™ÿ¨ÿßÿ®ÿå ŸÅŸÑÿß ÿ™ŸÜÿ≥Ÿé ÿßŸÑÿØÿπÿßÿ° ŸÑŸÜŸÅÿ≥ŸÉ ŸàŸÑŸÖŸÜ ÿ™ÿ≠ÿ®.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ±ÿßÿ®ÿπ: ÿµŸÑÿßÿ© ÿßŸÑÿ™ÿ±ÿßŸàŸäÿ≠ ÿ≥ŸÜÿ© ŸÖÿ§ŸÉÿØÿ©ÿå ÿßÿ≠ÿ±ÿµ ÿπŸÑŸâ ÿ£ÿØÿßÿ¶Ÿáÿß ŸÅŸä ÿßŸÑŸÖÿ≥ÿ¨ÿØ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿÆÿßŸÖÿ≥: ÿ™ÿµÿØŸÇ ŸàŸÑŸà ÿ®ÿßŸÑŸÇŸÑŸäŸÑÿå ŸÅÿßŸÑÿµÿØŸÇÿ© ÿ™ÿ∑ŸÅÿ¶ ÿßŸÑÿÆÿ∑Ÿäÿ¶ÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿØÿ≥: ÿßÿ≠ÿ∞ÿ± ŸÖŸÜ ÿßŸÑÿ∫Ÿäÿ®ÿ© ŸàÿßŸÑŸÜŸÖŸäŸÖÿ©ÿå ŸÅŸáŸÖÿß ŸäŸÅÿ≥ÿØÿßŸÜ ÿßŸÑÿµŸäÿßŸÖ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿ®ÿπ: ÿ£ŸàŸÑ ÿ£ÿ≥ÿ®Ÿàÿπ ŸÖŸÜ ÿ±ŸÖÿ∂ÿßŸÜ ŸäŸÖÿ∂Ÿäÿå ÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ∑ÿßÿπÿßÿ™!',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÖŸÜ: ÿßÿ¨ÿπŸÑ ŸÑÿ≥ÿßŸÜŸÉ ÿ±ÿ∑ÿ®Ÿãÿß ÿ®ÿ∞ŸÉÿ± ÿßŸÑŸÑŸá ŸÅŸä ŸÉŸÑ ŸàŸÇÿ™.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßÿ≥ÿπ: ÿµŸÑÿ© ÿßŸÑÿ±ÿ≠ŸÖ ŸÅŸä ÿ±ŸÖÿ∂ÿßŸÜ ŸÑŸáÿß ÿ£ÿ¨ÿ± ŸÖÿ∂ÿßÿπŸÅ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿπÿßÿ¥ÿ±: ÿ´ŸÑÿ´ ÿßŸÑÿ¥Ÿáÿ± ŸÖÿ∂Ÿâÿå ÿ¨ÿØÿØ ŸÜŸäÿ™ŸÉ Ÿàÿßÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿπÿ®ÿßÿØÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≠ÿßÿØŸä ÿπÿ¥ÿ±: ÿ®ÿØÿßŸäÿ© ÿßŸÑÿπÿ¥ÿ± ÿßŸÑÿ£Ÿàÿ≥ÿ∑ÿå ÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ∫ŸÅÿ±ÿ© ŸàÿßŸÑÿ±ÿ≠ŸÖÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÜŸä ÿπÿ¥ÿ±: ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿßŸÑÿßÿ≥ÿ™ÿ∫ŸÅÿßÿ±ÿå ŸÅÿßŸÑŸÑŸá Ÿäÿ≠ÿ® ÿßŸÑÿ™Ÿàÿßÿ®ŸäŸÜ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÑÿ´ ÿπÿ¥ÿ±: ÿßÿ≠ÿ±ÿµ ÿπŸÑŸâ ÿßŸÑÿ≥ÿ≠Ÿàÿ±ÿå ŸÅŸáŸà ÿ®ÿ±ŸÉÿ© ŸàÿπŸàŸÜ ÿπŸÑŸâ ÿßŸÑÿµŸäÿßŸÖ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ±ÿßÿ®ÿπ ÿπÿ¥ÿ±: ÿßŸÇÿ±ÿ£ ÿ™ŸÅÿ≥Ÿäÿ± ŸÖÿß ÿ™ŸÇÿ±ÿ£Ÿá ŸÖŸÜ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ŸÑÿ™ŸÅŸáŸÖ ŸÖÿπÿßŸÜŸäŸá.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿÆÿßŸÖÿ≥ ÿπÿ¥ÿ±: ŸÖŸÜÿ™ÿµŸÅ ÿ±ŸÖÿ∂ÿßŸÜÿå ÿ±ÿßÿ¨ÿπ ŸÜŸÅÿ≥ŸÉ Ÿàÿ≠ÿßÿ≥ÿ®Ÿáÿß.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿØÿ≥ ÿπÿ¥ÿ±: ÿßŸÑÿπÿ¥ÿ± ÿßŸÑÿ£Ÿàÿ≥ÿ∑ ÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ∫ŸÅÿ±ÿ©ÿå ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿßŸÑÿßÿ≥ÿ™ÿ∫ŸÅÿßÿ±.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿ®ÿπ ÿπÿ¥ÿ±: ÿ≥ÿßÿπÿØ ÿßŸÑŸÅŸÇÿ±ÿßÿ° ŸàÿßŸÑŸÖÿ≠ÿ™ÿßÿ¨ŸäŸÜÿå Ÿàÿ£ÿ∑ÿπŸÖ ÿßŸÑÿµÿßÿ¶ŸÖŸäŸÜ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÖŸÜ ÿπÿ¥ÿ±: ŸÑÿß ÿ™ÿ∂Ÿäÿπ ŸàŸÇÿ™ŸÉ ŸÅŸä ÿßŸÑŸÑÿ∫Ÿà ŸàÿßŸÑÿ®ÿßÿ∑ŸÑ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßÿ≥ÿπ ÿπÿ¥ÿ±: ÿßÿ∫ÿ™ŸÜŸÖ ÿßŸÑÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿ£ÿÆŸäÿ±ÿ© ŸÖŸÜ ÿßŸÑŸÜŸáÿßÿ± ÿ®ÿßŸÑÿ∞ŸÉÿ± ŸàÿßŸÑÿØÿπÿßÿ°.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿßŸÇÿ™ÿ±ÿ® ŸÖŸàÿπÿØ ÿßŸÑÿπÿ¥ÿ± ÿßŸÑÿ£ŸàÿßÿÆÿ±ÿå ÿßÿ≥ÿ™ÿπÿØ ŸÑŸáÿß ÿ®ÿßŸÑÿπÿ≤ŸäŸÖÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≠ÿßÿØŸä ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿ®ÿØÿßŸäÿ© ÿßŸÑÿπÿ¥ÿ± ÿßŸÑÿ£ŸàÿßÿÆÿ±ÿå ÿ£ŸäÿßŸÖ ÿßŸÑÿπÿ™ŸÇ ŸÖŸÜ ÿßŸÑŸÜÿßÿ±.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÜŸä ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ± ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑŸÑŸäÿßŸÑŸäÿå ÿ£ÿ≠ŸäŸáÿß ÿ®ÿßŸÑÿπÿ®ÿßÿØÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÑÿ´ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿßÿπÿ™ŸÉŸÅ ÿ•ŸÜ ÿßÿ≥ÿ™ÿ∑ÿπÿ™ÿå ŸÅŸáŸà ÿ≥ŸÜÿ© ÿπÿ∏ŸäŸÖÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ±ÿßÿ®ÿπ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿßÿ∑ŸÑÿ® ÿßŸÑÿπŸÅŸà ŸàÿßŸÑŸÖÿ∫ŸÅÿ±ÿ© ŸÖŸÜ ÿßŸÑŸÑŸá ŸÅŸä ŸÉŸÑ ÿ≥ÿ¨ÿØÿ©.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿÆÿßŸÖÿ≥ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿ£ÿ≠ŸäŸä Ÿáÿ∞Ÿá ÿßŸÑŸÑŸäŸÑÿ©ÿå ŸÅŸÇÿØ ÿ™ŸÉŸàŸÜ ŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ±.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿØÿ≥ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿ∂ÿßÿπŸÅ ŸÖŸÜ ÿ¨ŸáÿØŸÉ ŸÅŸä ÿßŸÑÿπÿ®ÿßÿØÿ©ÿå ÿßŸÑÿÆÿ™ÿßŸÖ ŸÇÿ±Ÿäÿ®.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ≥ÿßÿ®ÿπ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿßŸÑŸÑŸäŸÑÿ© ÿßŸÑÿ£ÿ±ÿ¨ÿ≠ ŸÑŸÑŸäŸÑÿ© ÿßŸÑŸÇÿØÿ±ÿå ÿßÿ¨ÿ™ŸáÿØ ŸÅŸäŸáÿß!',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ´ÿßŸÖŸÜ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿßÿÆÿ™ŸÖ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿ•ŸÜ ŸÑŸÖ ÿ™ŸÉŸÜ ÿÆÿ™ŸÖÿ™Ÿá ÿ®ÿπÿØ.',
            'ÿßŸÑŸäŸàŸÖ ÿßŸÑÿ™ÿßÿ≥ÿπ ŸàÿßŸÑÿπÿ¥ÿ±ŸàŸÜ: ÿ¢ÿÆÿ± ÿ£ŸäÿßŸÖ ÿ±ŸÖÿ∂ÿßŸÜÿå ÿ£ÿÆÿ±ÿ¨ ÿ≤ŸÉÿßÿ© ÿßŸÑŸÅÿ∑ÿ± ŸÇÿ®ŸÑ ÿßŸÑÿπŸäÿØ.'
        ];

        const adhkar = [
            { arabic: 'ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé ÿßŸÑŸÑŸéŸëŸáŸê ŸàŸéÿ®Ÿêÿ≠ŸéŸÖŸíÿØŸêŸáŸê', translation: '–°–≤—è—Ç –ê–ª–ª–∞—Ö –∏ —Ö–≤–∞–ª–∞ –ï–º—É' },
            { arabic: 'ŸÑŸéÿß ÿ•ŸêŸÑŸéŸ∞ŸáŸé ÿ•ŸêŸÑŸéŸëÿß ÿßŸÑŸÑŸéŸëŸáŸè', translation: '–ù–µ—Ç –±–æ–∂–µ—Å—Ç–≤–∞, –∫—Ä–æ–º–µ –ê–ª–ª–∞—Ö–∞' },
            { arabic: 'ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿµŸéŸÑŸêŸë ÿπŸéŸÑŸéŸâŸ∞ ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸç', translation: '–û –ê–ª–ª–∞—Ö, –±–ª–∞–≥–æ—Å–ª–æ–≤–∏ –ú—É—Ö–∞–º–º–∞–¥–∞' },
            { arabic: 'ÿ£Ÿéÿ≥Ÿíÿ™Ÿéÿ∫ŸíŸÅŸêÿ±Ÿè ÿßŸÑŸÑŸéŸëŸáŸé', translation: '–ü—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è —É –ê–ª–ª–∞—Ö–∞' },
            { arabic: 'ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê', translation: '–•–≤–∞–ª–∞ –ê–ª–ª–∞—Ö—É' },
            { arabic: 'ÿßŸÑŸÑŸéŸëŸáŸè ÿ£ŸéŸÉŸíÿ®Ÿéÿ±Ÿè', translation: '–ê–ª–ª–∞—Ö –í–µ–ª–∏–∫' }
        ];

        const monthNames = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];

        let currentDayIndex = 0;
        let countdownInterval;
        let deferredPrompt;
        let notificationPermission = false;

        function applyLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('ramadan-lang', lang);
            const t = translations[lang];
            
            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('cityName').textContent = t.city;
            document.querySelector('.next-prayer-label').textContent = t.nextPrayer;
            document.querySelector('.countdown-units').textContent = t.units;
            document.getElementById('tipsSectionTitle').textContent = t.tipsTitle;
            document.getElementById('notifText').textContent = t.notifText;
            document.getElementById('enableNotif').textContent = t.notifButton;
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            displayDay(currentDayIndex);
        }

        function applyTheme(theme) {
            currentTheme = theme;
            localStorage.setItem('ramadan-theme', theme);
            document.body.className = theme === 'light' ? 'light-theme' : '';
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.theme === theme);
            });
        }

        async function requestNotificationPermission() {
            if (!('Notification' in window)) return;
            
            const permission = await Notification.requestPermission();
            if (permission === 'granted') {
                notificationPermission = true;
                localStorage.setItem('ramadan-notif', 'granted');
                document.getElementById('notifPrompt').classList.remove('show');
                scheduleNextNotification();
            }
        }

        function scheduleNextNotification() {
            if (!notificationPermission) return;
            
            const now = new Date();
            const dayData = ramadanData[currentDayIndex];
            const [day, month] = dayData.date.split('.');
            const monthIndex = month === '02' ? 1 : 2;
            const [fajrH, fajrM] = dayData.fajr.split(':').map(Number);
            
            const fajrTime = new Date(2026, monthIndex, parseInt(day), fajrH, fajrM);
            const notifTime = new Date(fajrTime.getTime() - 30 * 60 * 1000);
            
            if (notifTime > now) {
                const delay = notifTime - now;
                setTimeout(() => {
                    new Notification('üåô –†–∞–º–∞–¥–∞–Ω - –°–∞—Ä–∞—Ç–æ–≤', {
                        body: `–§–∞–¥–∂—Ä —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç (${dayData.fajr})`,
                        icon: document.getElementById('favicon').href,
                        tag: 'fajr-reminder'
                    });
                }, delay);
            }
        }

        function initPWA() {
            const manifestData = {
                name: '–†–∞–º–∞–¥–∞–Ω 2026 - –°–∞—Ä–∞—Ç–æ–≤',
                short_name: '–†–∞–º–∞–¥–∞–Ω',
                description: '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–º–∞–∑–æ–≤ –Ω–∞ –†–∞–º–∞–¥–∞–Ω 2026 –≤ –°–∞—Ä–∞—Ç–æ–≤–µ',
                start_url: window.location.pathname,
                display: 'standalone',
                background_color: '#0a0015',
                theme_color: '#1a0033',
                orientation: 'portrait',
                icons: [
                    {
                        src: document.getElementById('favicon').href,
                        sizes: '512x512',
                        type: 'image/svg+xml'
                    }
                ]
            };
            
            const blob = new Blob([JSON.stringify(manifestData)], { type: 'application/json' });
            const manifestURL = URL.createObjectURL(blob);
            const link = document.querySelector('link[rel="manifest"]') || document.createElement('link');
            link.rel = 'manifest';
            link.href = manifestURL;
            if (!document.querySelector('link[rel="manifest"]')) {
                document.head.appendChild(link);
            }
            
            if ('serviceWorker' in navigator) {
                const swCode = `
                    const CACHE = 'ramadan-v1';
                    self.addEventListener('install', e => {
                        e.waitUntil(caches.open(CACHE).then(cache => 
                            cache.addAll(['/', '/index.html'])
                        ));
                    });
                    self.addEventListener('fetch', e => {
                        e.respondWith(
                            caches.match(e.request).then(r => r || fetch(e.request))
                        );
                    });
                `;
                const swBlob = new Blob([swCode], { type: 'application/javascript' });
                const swURL = URL.createObjectURL(swBlob);
                navigator.serviceWorker.register(swURL).catch(() => {});
            }
        }

        function getCurrentRamadanDay() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const day = now.getDate();
            
            for (let i = 0; i < ramadanData.length; i++) {
                const [d, m] = ramadanData[i].date.split('.');
                const dayNum = parseInt(d);
                const monthNum = parseInt(m) - 1;
                
                if (monthNum === month && dayNum === day) {
                    return i;
                }
            }
            
            const startDate = new Date(2026, 1, 19);
            if (now < startDate) return 0;
            return ramadanData.length - 1;
        }

        function formatDate(dateStr) {
            const [day, month] = dateStr.split('.');
            const monthIndex = month === '02' ? 1 : 2;
            return `${parseInt(day)} ${monthNames[monthIndex]}`;
        }

        function displayDay(index) {
            currentDayIndex = index;
            const dayData = ramadanData[index];
            const t = translations[currentLang];
            
            document.getElementById('currentDayNum').textContent = `${t.day} ${dayData.day}`;
            document.getElementById('currentDate').textContent = formatDate(dayData.date);
            
            const todayTimesEl = document.getElementById('todayTimes');
            todayTimesEl.innerHTML = '';
            
            const prayers = ['fajr', 'sunrise', 'dhuhr', 'asr', 'maghrib', 'isha'];
            
            prayers.forEach(prayer => {
                const prayerEl = document.createElement('div');
                let highlightClass = '';
                if (prayer === 'fajr') highlightClass = 'fajr-highlight';
                if (prayer === 'maghrib') highlightClass = 'maghrib-highlight';
                
                prayerEl.className = `prayer-time ${highlightClass}`;
                prayerEl.innerHTML = `
                    <div class="prayer-name">${translations[currentLang].prayers[prayer]}</div>
                    <div class="prayer-value">${dayData[prayer]}</div>
                `;
                todayTimesEl.appendChild(prayerEl);
            });
            
            updateImsakTime(dayData.fajr);
            updateFastingDuration(dayData.fajr, dayData.maghrib);
            updateHijriDate(dayData.day);
            updateDailyTip(dayData.day);
            updateProgress(dayData.day);
            
            document.getElementById('prevDay').disabled = index === 0;
            document.getElementById('nextDay').disabled = index === ramadanData.length - 1;
            
            updateCountdown();
        }

        function getNextPrayer() {
            const now = new Date();
            const dayData = ramadanData[currentDayIndex];
            const [day, month] = dayData.date.split('.');
            const year = month === '02' ? 2026 : 2026;
            const monthIndex = month === '02' ? 1 : 2;
            
            const prayers = [
                { name: '–§–∞–¥–∂—Ä', key: 'fajr', time: dayData.fajr },
                { name: '–í–æ—Å—Ö–æ–¥', key: 'sunrise', time: dayData.sunrise },
                { name: '–ó—É—Ö—Ä', key: 'dhuhr', time: dayData.dhuhr },
                { name: '–ê—Å—Ä', key: 'asr', time: dayData.asr },
                { name: '–ú–∞–≥—Ä–∏–±', key: 'maghrib', time: dayData.maghrib },
                { name: '–ò—à–∞', key: 'isha', time: dayData.isha }
            ];
            
            for (let prayer of prayers) {
                const [hours, minutes] = prayer.time.split(':');
                const prayerTime = new Date(year, monthIndex, parseInt(day), parseInt(hours), parseInt(minutes));
                
                if (now < prayerTime) {
                    return { name: prayer.name, time: prayerTime };
                }
            }
            
            if (currentDayIndex < ramadanData.length - 1) {
                const nextDay = ramadanData[currentDayIndex + 1];
                const [nextDayNum, nextMonth] = nextDay.date.split('.');
                const nextMonthIndex = nextMonth === '02' ? 1 : 2;
                const [hours, minutes] = nextDay.fajr.split(':');
                return {
                    name: '–§–∞–¥–∂—Ä',
                    time: new Date(year, nextMonthIndex, parseInt(nextDayNum), parseInt(hours), parseInt(minutes))
                };
            }
            
            return null;
        }

        function updateCountdown() {
            const nextPrayer = getNextPrayer();
            const t = translations[currentLang];
            
            if (!nextPrayer) {
                document.getElementById('nextPrayerName').textContent = t.ramadanFinished;
                document.getElementById('countdownTimer').textContent = '--:--:--';
                return;
            }
            
            document.getElementById('nextPrayerName').textContent = nextPrayer.name;
            
            function tick() {
                const now = new Date();
                const diff = nextPrayer.time - now;
                
                if (diff <= 0) {
                    updateCountdown();
                    return;
                }
                
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('countdownTimer').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
            
            tick();
            clearInterval(countdownInterval);
            countdownInterval = setInterval(tick, 1000);
        }

        function renderCalendar() {
            const calendarEl = document.getElementById('calendarGrid');
            calendarEl.innerHTML = '';
            
            ramadanData.forEach((day, index) => {
                const dayEl = document.createElement('div');
                dayEl.className = `calendar-day ${index === currentDayIndex ? 'current' : ''}`;
                dayEl.innerHTML = `
                    <div class="calendar-day-num">${day.day}</div>
                    <div class="calendar-time">${day.fajr}</div>
                    <div class="calendar-time">${day.sunrise}</div>
                    <div class="calendar-time">${day.dhuhr}</div>
                    <div class="calendar-time">${day.asr}</div>
                    <div class="calendar-time">${day.maghrib}</div>
                    <div class="calendar-time">${day.isha}</div>
                `;
                dayEl.addEventListener('click', () => {
                    displayDay(index);
                    document.getElementById('calendarGrid').classList.remove('active');
                    document.getElementById('toggleMonth').textContent = 'üìÖ –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Å—å –º–µ—Å—è—Ü';
                });
                calendarEl.appendChild(dayEl);
            });
        }

        document.getElementById('prevDay').addEventListener('click', () => {
            if (currentDayIndex > 0) displayDay(currentDayIndex - 1);
        });

        document.getElementById('nextDay').addEventListener('click', () => {
            if (currentDayIndex < ramadanData.length - 1) displayDay(currentDayIndex + 1);
        });

        document.getElementById('toggleMonth').addEventListener('click', () => {
            const calendarEl = document.getElementById('calendarGrid');
            const btn = document.getElementById('toggleMonth');
            const t = translations[currentLang];
            calendarEl.classList.toggle('active');
            btn.textContent = calendarEl.classList.contains('active') ? t.hideMonth : t.showMonth;
        });

        document.getElementById('tipsToggle').addEventListener('click', () => {
            document.querySelector('.tips-section').classList.toggle('collapsed');
        });

        document.getElementById('langRu').addEventListener('click', () => applyLanguage('ru'));
        document.getElementById('langAr').addEventListener('click', () => applyLanguage('ar'));
        document.getElementById('themeDark').addEventListener('click', () => applyTheme('dark'));
        document.getElementById('themeLight').addEventListener('click', () => applyTheme('light'));
        document.getElementById('enableNotif').addEventListener('click', requestNotificationPermission);

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.add('show');
        });

        document.getElementById('installBtn').addEventListener('click', async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            deferredPrompt = null;
            document.getElementById('installPrompt').classList.remove('show');
        });

        document.getElementById('closeInstall').addEventListener('click', () => {
            document.getElementById('installPrompt').classList.remove('show');
        });

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        }

        function updateImsakTime(fajrTime) {
            const [hours, minutes] = fajrTime.split(':');
            let imsakMinutes = parseInt(minutes) - 10;
            let imsakHours = parseInt(hours);
            
            if (imsakMinutes < 0) {
                imsakMinutes += 60;
                imsakHours -= 1;
            }
            
            document.getElementById('imsakTime').textContent = 
                `${String(imsakHours).padStart(2, '0')}:${String(imsakMinutes).padStart(2, '0')}`;
        }

        function updateFastingDuration(fajrTime, maghribTime) {
            const [fajrH, fajrM] = fajrTime.split(':').map(Number);
            const [maghribH, maghribM] = maghribTime.split(':').map(Number);
            
            const fajrMinutes = fajrH * 60 + fajrM;
            const maghribMinutes = maghribH * 60 + maghribM;
            const durationMinutes = maghribMinutes - fajrMinutes;
            
            const hours = Math.floor(durationMinutes / 60);
            const minutes = durationMinutes % 60;
            
            document.getElementById('fastingDuration').textContent = 
                `${hours} —á ${minutes} –º–∏–Ω`;
        }

        function updateHijriDate(day) {
            document.getElementById('hijriDate').textContent = `${day} ÿ±ŸÖÿ∂ÿßŸÜ 1447`;
        }

        function updateDailyTip(day) {
            const tipIndex = day - 1;
            document.getElementById('dailyTip').textContent = dailyTips[tipIndex] || dailyTips[0];
            
            const dhikrIndex = (day - 1) % adhkar.length;
            document.getElementById('dhikrArabic').textContent = adhkar[dhikrIndex].arabic;
            document.getElementById('dhikrTranslation').textContent = adhkar[dhikrIndex].translation;
        }

        function updateProgress(day) {
            const percentage = Math.round((day / 29) * 100);
            const t = translations[currentLang];
            
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressPercentage').textContent = `${percentage}%`;
            document.getElementById('progressInfo').textContent = ` - ÿßŸÑŸäŸàŸÖ ${day} ŸÖŸÜ 29`;
            
            const remaining = 29 - day;
            document.getElementById('daysRemaining').textContent = 
                remaining === 0 ? t.lastDay : `${t.remaining} ${remaining} ŸäŸàŸÖŸãÿß`;
        }

        applyLanguage(currentLang);
        applyTheme(currentTheme);
        initPWA();

        if (localStorage.getItem('ramadan-notif') !== 'granted' && 'Notification' in window) {
            setTimeout(() => {
                document.getElementById('notifPrompt').classList.add('show');
            }, 3000);
        } else if (localStorage.getItem('ramadan-notif') === 'granted') {
            notificationPermission = true;
            scheduleNextNotification();
        }

        const initialDay = getCurrentRamadanDay();
        displayDay(initialDay);
        renderCalendar();

        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            if (touchEndX < touchStartX - 50 && currentDayIndex < ramadanData.length - 1) {
                displayDay(currentDayIndex + 1);
            }
            if (touchEndX > touchStartX + 50 && currentDayIndex > 0) {
                displayDay(currentDayIndex - 1);
            }
        }
    </script>
</body>
</html>

